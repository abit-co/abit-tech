<!DOCTYPE html>
<html>
<head>
	<title>Home</title>
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- <meta name="google-signin-client_id" content="280264346590-vjg6cqponliotfqn32pt2mna2jnqmmtu.apps.googleusercontent.com"> -->

	<link rel="shortcut icon" href="svg/favicon.svg" type="image/x-icon">
	<link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">

	<!-- Google tag (gtag.js) -->
	<script>
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());

	gtag('config', 'G-M2C1G7D2PW');


	</script>


<!-- <script type="text/javascript">
	
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "i796yyjdnr");
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M2C1G7D2PW"></script> -->

</head>
<body>
	<header style="height: 110px;">
		<nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom-0" style="height: 110px;">
			<div class="container">
			<a class="navbar-brand" href="index.html">aBit</a>
				<div class="expand navbar-expand" id="homePageNavbar">
					<ul class="navbar-nav ml-auto mt-lg-0 ">
						<li class="nav-item active">
							<a class="nav-link nav-item-creator border-0 pr-4 text" href="creatorpage.html">Are you a creator? <span class="sr-only">(current)</span></a>
						</li>
						<li>
							<button class="btn abit-outline-purple my-2 my-sm-0" id="registerLoginBtn" data-toggle="modal" data-target="#registerModal">Login / Signup</button>
						</li>
					</ul>
				</div>
			</div>	
		</nav>
	</header>
	<div style="overflow: hidden;">
	<section class="home-section-1">
		<div class="container">
			<div class="row">
				<div class="col-sm-12 col-xs-12">
					<div class="left-section-wrapper text-center position-absolute">
						<h3 class="text-heading">Co-own Content with your <i>Favourite</i> Creator.</h3>
						<p class="text-para">Invest in their videos and 
							earn on every view.
						</p>
						<button type="button" class="btn neo-primary-btn abit-white abit-bg-purple d-inline-flex cstm-btn-props signup-btn" data-toggle="modal" data-target="#registerModal">Sign me up!</button>

					</div>
				</div>
				<div class="col-md-11 offset-md-1 col-lg-11 offset-lg-1 col-sm-12 col-xs-12">
					<img src="img/section-1-mobileview.png" class="mt-3 mobile-view-on step-wise-explanation" alt="">
					<div class="img-text-wrapper mobile-view-off">
						<div class="step-1"><span class="step-count">01</span> <span class="step-text">Claim your share in their video..</span></div>
						<div class="step-2"><span class="step-count">02</span> <span class="step-text">Earn from the video as they do..</span></div>
						<div class="step-3"><span class="step-count">03</span> <span class="step-text">Get exclusive community perks.</span></div>
						<div class="step-4"><span class="step-count">04</span> <span class="step-text">Go from ‘fan’ to ‘co-owner’.</span></div> 
						<img src="img/section-1-infographics.png" class="mt-3" alt="">
					</div>
				</div>
				<div id="SAMPLEdivID"></div>
			</div>
		</div>
	</section>
	<section class="home-section-2">
		<div class="container">
			<div class="row">
				<div id="carouselExampleControls" class="position-relative ">
					<p class="mb-5 creators-list-text">Your Creators are On Board</p>
					<div class="carousel-inner">
					<div class="row carousel-item active">
						<div class="col-12 col-lg-3 col-sm-6 col-md-6 mobile-view-off">
							<img class="d-block slider-image" src="img/token-a.png" alt="First slide" style="height:322px">
							<div class="about-creators position-absolute">
								<div class="top-left-part">
									<div class="heading">Moved to NYC</div>
									<div class="d-inline-flex mt-2">
										<img class="user-image" src="svg/user-img-1.svg" alt="user-image">
										<h5 class="heading ml-2 description">Dan Mace</h5>
									</div>
								</div>
								<div class="bottom-token-info">
									<ul class="list-group list-group-horizontal token-info-content">
										<li class="list-group-item border-0">
											<p class="mb-1">Shares</p>
											<p>542</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Offered</p>
											<p>86%</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Raised</p>
											<p>$ 14,092</p>
										</li>
									  </ul>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-3 col-sm-6 col-md-6">
							<img class="d-block slider-image" src="img/token-b.png" alt="First slide" style="height:322px">
							<div class="about-creators position-absolute">
								<div class="top-left-part">
									<div class="heading">A Huge Carol Flash Mob</div>
									<div class="d-inline-flex mt-2">
										<img class="user-image" src="svg/user-img-2.svg" alt="user-image">
										<h5 class="heading ml-2 description">Joy Harton</h5>
									</div>
								</div>
								<div class="bottom-token-info">
									<ul class="list-group list-group-horizontal token-info-content">
										<li class="list-group-item border-0">
											<p class="mb-1">Shares</p>
											<p>234</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Offered</p>
											<p>50%</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Raised</p>
											<p>$ 5619</p>
										</li>
									  </ul>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-3 col-sm-6 col-md-6 mobile-view-off">
							<img class="d-block slider-image" src="img/token-c.png" alt="First slide" style="height:322px">
							<div class="about-creators position-absolute">
								<div class="top-left-part">
									<div class="heading">Our trip to Mykonos</div>
									<div class="d-inline-flex mt-2">
										<img class="user-image" src="svg/user-img-3.svg" alt="user-image">
										<h5 class="heading ml-2 description">Stephen George</h5>
									</div>
								</div>
								<div class="bottom-token-info">
									<ul class="list-group list-group-horizontal token-info-content">
										<li class="list-group-item border-0">
											<p class="mb-1">Shares</p>
											<p>312</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Offered</p>
											<p>65%</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Raised</p>
											<p>$ 8425</p>
										</li>
									  </ul>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-3 col-sm-6 col-md-6 mobile-view-off">
							<img class="d-block slider-image" src="img/token-d.png" alt="First slide" style="height:322px">
							<div class="about-creators position-absolute">
								<div class="top-left-part">
									<div class="heading">36 Hours of Shooting</div>
									<div class="d-inline-flex mt-2">
										<img class="user-image" src="svg/user-img-4.svg" alt="user-image">
										<h5 class="heading ml-2 description">John Bill</h5>
									</div>
								</div>
								<div class="bottom-token-info">
									<ul class="list-group list-group-horizontal token-info-content">
										<li class="list-group-item border-0">
											<p class="mb-1">Shares</p>
											<p>150</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Offered</p>
											<p>33%</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Raised</p>
											<p>$ 4500</p>
										</li>
									  </ul>
								</div>
							</div>
						</div>
					</div>
					<!-- <div class="carousel-item">
						<div class="col-12 col-lg-3 col-sm-6 col-md-6">
							<img class="d-block slider-image" src="svg/home/token-b.svg" alt="First slide" style="height:322px">
							<div class="about-creators position-absolute">
								<div class="top-left-part">
									<div class="heading">Moved to NYC</div>
									<div class="d-inline-flex mt-2">
										<img class="user-image" src="svg/user-img-1.svg" alt="user-image">
										<h5 class="heading ml-2 description">Dan Mace</h5>
									</div>
								</div>
								<div class="bottom-token-info">
									<ul class="list-group list-group-horizontal token-info-content">
										<li class="list-group-item border-0">
											<p class="mb-1">Total Tokens</p>
											<p>1110</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Offered</p>
											<p>50%</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Raised</p>
											<p>$ 369k</p>
										</li>
									  </ul>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-3 col-sm-6 col-md-6">
							<img class="d-block slider-image" src="svg/home/token-d.svg" alt="First slide" style="height:322px">
							<div class="about-creators position-absolute">
								<div class="top-left-part">
									<div class="heading">Moved to NYC</div>
									<div class="d-inline-flex mt-2">
										<img class="user-image" src="svg/user-img-2.svg" alt="user-image">
										<h5 class="heading ml-2 description">Dan Mace</h5>
									</div>
								</div>
								<div class="bottom-token-info">
									<ul class="list-group list-group-horizontal token-info-content">
										<li class="list-group-item border-0">
											<p class="mb-1">Total Tokens</p>
											<p>1110</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Offered</p>
											<p>50%</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Raised</p>
											<p>$ 369k</p>
										</li>
									  </ul>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-3 col-sm-6 col-md-6">
							<img class="d-block slider-image" src="svg/home/token-a.svg" alt="First slide" style="height:322px">
							<div class="about-creators position-absolute">
								<div class="top-left-part">
									<div class="heading">Moved to NYC</div>
									<div class="d-inline-flex mt-2">
										<img class="user-image" src="svg/user-img-3.svg" alt="user-image">
										<h5 class="heading ml-2 description">Dan Mace</h5>
									</div>
								</div>
								<div class="bottom-token-info">
									<ul class="list-group list-group-horizontal token-info-content">
										<li class="list-group-item border-0">
											<p class="mb-1">Total Tokens</p>
											<p>1110</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Offered</p>
											<p>50%</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Raised</p>
											<p>$ 369k</p>
										</li>
									  </ul>
								</div>
							</div>
						</div>
						<div class="col-12 col-lg-3 col-sm-6 col-md-6">
							<img class="d-block slider-image" src="svg/home/token-c.svg" alt="First slide" style="height:322px">
							<div class="about-creators position-absolute">
								<div class="top-left-part">
									<div class="heading">Moved to NYC</div>
									<div class="d-inline-flex mt-2">
										<img class="user-image" src="svg/user-img-4.svg" alt="user-image">
										<h5 class="heading ml-2 description">Dan Mace</h5>
									</div>
								</div>
								<div class="bottom-token-info">
									<ul class="list-group list-group-horizontal token-info-content">
										<li class="list-group-item border-0">
											<p class="mb-1">Total Tokens</p>
											<p>1110</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Offered</p>
											<p>50%</p>
										</li>
										<li class="list-group-item border-0 px-0">
											<p class="mb-1">Raised</p>
											<p>$ 369k</p>
										</li>
									  </ul>
								</div>
							</div>
						</div>
					</div> -->
				</div>
					<!-- <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
					</a> -->
				</div>
			</div>
		</div>
	</section>
	<section class="home-section-3">
		<div class="container">
			<div class="row pt-4">
				<div class="col-md-12 text-center">
					<div class="content-wrapper">
						<h3 class="heading">Become <i>closer</i> to your favourite creator!</h3>
						<p class="description mt-2 mb-4">Notify yourself with latest release from the Creator</p>
						<button type="submit" class="btn neo-primary-btn abit-black abit-bg-yellow d-inline-flex cstm-btn-props signup-btn" data-toggle="modal" data-target="#registerModal">Sign me up!</button>
					</div>
				</div>
			</div>
		</div>
	</section>
	<section class="home-section-4">
		<div class="container">
			<div class="row" style="margin-top: 100px;">
				<div class="col-md-12">
					<p class="pl-3 main-heading">And now it’s your turn. Get started right away!</p>
					<div class="position-relative">
						<img src="img/section-4-live-token.png" class="mt-3 mobile-view-off" alt="" style="width: 100%;">
						<img src="img/section-4-live-token-mobile.png" class="mt-3 mobile-view-on" alt="" style="width: 100%;">
						<div class="top-right-live-now d-inline-flex position-absolute ">
							<div class="rounded-circle red-circle"></div>
							<div class="livenow-text">Live Now</div>
						</div>
						<div class="bottom-left-token-portion position-absolute">
							<div class="d-inline-flex">
								<img src="svg/home/user-img.svg" alt="user-image">
								<h5 class="heading ml-2 mt-2">Dan Mace</h5>
							</div>
							<p class="description">The Sound of Silence</p>
							<a href="fractionalize.html">
								<button type="button" class="btn neo-primary-btn abit-white abit-transparent-btn d-inline-flex border border-white cstm-btn-prop " data-dismiss="modal" style=" width: 150px;
														height: 50px; box-shadow: 2px 4px #000000, 2px 4px 0 1px #FFFFFF;">Buy Now</button>
							</a>
						</div>
						<div class="bottom-right-token-info position-absolute">
							<ul class="list-group list-group-horizontal token-info-content">
								<li class="list-group-item border-0">
									<div class="mb-1 heading">Shares</div>
									<div class="description">317</div>
								</li>
								<li class="list-group-item border-0">
									<div class="mb-1 heading">Offered</div>
									<div class="description">75%</div>
								</li>
								<li class="list-group-item border-0">
									<div class="mb-1 heading">Raising</div>
									<div class="description">$ 9510</div>
								</li>
							  </ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<section class="home-section-5">
		<div class="container">
			<div class="row">
				<div class="col-md-6 col-lg-6 col-sm-12 col-12 order-2 order-lg-1 order-md-1 text-center">
					<div class="left-content-wrapper">
						<h3 class="heading mobile-view-off"><i>Hold On!</i> Are you a Creator?</h3>
						<h3 class="heading mobile-view-on ">
							<div class="heading-text-1"><i>Hold On!</i> </div>
							<div class="heading-text-2">Are you a Creator?</div>
						</h3>
						<p class="description">Set yourself free. Check out our creator’s program.</p>
						<button type="button" class="btn neo-primary-btn abit-white abit-bg-purple d-inline-flex cstm-btn-props signup-btn" data-toggle="modal" data-target="#creatorSignupModal">Join Now</button>
					</div>
				</div>
				<div class="col-md-6 col-lg-6 col-sm-12 col-12 order-lg-2 order-md-2 order-1">
					<div class="gif-img text-center position-relative" style="top: 120px;" >
						<img class="gif-person" src="svg/home/section-5-infoimg1.svg" alt="">
						<img class="gif-person d-none" src="svg/home/section-5-infoimg2.svg" alt="">
					</div>
				</div>
			</div>
		</div>
	</section>
	<footer class="mt-4 section-footer">
		<div class="container" style="margin-top: 76px;" >
			<div class="row">
				<div class="col-lg-6 col-md-6 col-xs-4 col-sm-5 col-6">
					<!-- <h3 class="heading">aBit</h3> -->
				<p class="description">Own <span class="heading">aBit</span> of your favourite videos.</p>
				</div> 
				<div class="col-lg-6 col-md-6 col-sm-7 col-6">
					<ul class="list-group border-left float-right">
						<a href="index.html"><li class="list-group-item border-0">Home</li></a>
						<a href="creatorpage.html"><li class="list-group-item border-0">Are you a creator?</li></a>
						<!-- <li class="list-group-item border-0">Support</li> -->
					</ul>
				</div>
			</div>
		</div>
	</footer>
	</div>
	
	<div w3-include-html="login.html"></div>
	<div w3-include-html="register.html"></div>
	<div w3-include-html="modals/creatorSignupModal.html"></div>
	<!-- <div w3-include-html="modals/waitListModal.html"></div> -->


	<script async src="https://www.googletagmanager.com/gtag/js?id=G-M2C1G7D2PW"></script>

	<!-- <script src="js/loadExtLibrary.js"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
	
	

	<!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> -->
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
	<script src="js/main.js"></script> 
	<!-- <script src="js/waitlistModal.js"></script> -->
	<script src="js/detects.js"></script>
	<script src="js/another-file.js"></script>
	<script src="js/main.polyfills.js"></script>
	<script src="https://accounts.google.com/gsi/client" async></script>
	<script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>



	

</body>
<script>
	let isUserLoggedIn = checkIfTokenExist();
	const BASE_URL = `https://api-abit.azurewebsites.net`;
	//const BASE_URL = `https://api-abit.onrender.com`;

	$(function() {
		//isUserLoggedIn = checkIfTokenExist();
		if(isUserLoggedIn) getUserProfileInfo(isUserLoggedIn);
	});


	let USER_CONSTANT = {type: "USER", isLogin : false};
	//  let {loggedUserType, isLogin} = USER_CONSTANT;
	 if(!isUserLoggedIn) {
      window.onload = function () {
        google.accounts.id.initialize({
          client_id: "280264346590-vjg6cqponliotfqn32pt2mna2jnqmmtu.apps.googleusercontent.com",
          callback: handleCredentialResponse,
		  auto_select: true,
		  itp_support: true,
		  use_fedcm_for_prompt: false,
		  cancel_on_tap_outside: false,
		  shape: "circle",
		  select_by: 'auto',
        });
		setTimeout(function() {
			google.accounts.id.renderButton(
          document.getElementById("creatorLoginBtn"),
          { 
			theme: "outline",
		  	 size: "large",
			 shape: "circle",
			 width: "352px",
			 text: "signup_with",
			 click_listener: function() {
				onGoogleBtnClickHandler({userType: "CREATOR", isLogin : true} );
			 }
		}  // customization attributes
		);
		google.accounts.id.renderButton(
          document.getElementById("creatorSignupBtn"),
          { 
			theme: "outline",
		  	 size: "large",
			 shape: "circle",
			 width: "352px",
			 text: "signup_with",
			 click_listener: function() {
				onGoogleBtnClickHandler({userType: "CREATOR", isLogin : false} );
			 }
		}  // customization attributes
		);
		google.accounts.id.renderButton(
          document.getElementById("userLoginBtn"),
          { 
			theme: "outline",
		  	 size: "large",
			 shape: "circle",
			 width: "352px",
			 text: "continue_with",
			 click_listener: function() {
				onGoogleBtnClickHandler({userType: "FAN", isLogin : true} );
			 }
		}  // customization attributes
        );
		google.accounts.id.renderButton(
          document.getElementById("userSignupBtn"),
          { 
			theme: "outline",
		  	 size: "large",
			 shape: "circle",
			 width: "352px",
			 text: "signup_with",
			 click_listener: function() {
				onGoogleBtnClickHandler({userType: "FAN", isLogin : false} );
			 }
		}  // customization attributes
        );
		}, 200)
       
		//google.accounts.id.prompt(); // also display the One Tap dialog
      }
	}
	  function onGoogleBtnClickHandler(USER_CONSTANT_OBJ) {
		Object.assign(USER_CONSTANT, USER_CONSTANT_OBJ);
	  }

	  function handleCredentialResponse(response) {
		debugger;

        console.log("Encoded JWT ID token: " + response.credential);
		let loggedInUserInfo = parseJwt(response.credential);
		console.log(loggedInUserInfo);
		registerOrLoginViaGoogle(response, USER_CONSTANT);
      }
	  function parseJwt (token) {
		var base64Url = token.split('.')[1];
		var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
		var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
			return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
		}).join(''));

		return JSON.parse(jsonPayload);
	}
	function registerOrLoginViaGoogle(response, USER_CONSTANT) {
		let {userType, isLogin} = USER_CONSTANT;
		$.ajax({
			url: `${BASE_URL}/v1/${userType.toLowerCase()}/loginOrSignupWithGoogle`,
			type: 'POST',
			data:  JSON.stringify({
				'token': response.credential
			}),
			xhrFields: {
				withCredentials: true
			},
			contentType: "application/json; charset=utf-8",
			success: function (data, status, jqXHR) {
				
				debugger
				const {id, email} = data?.user;
				data.user = {...data?.user, ...USER_CONSTANT}
				localStorage.setItem("userInfo",  JSON.stringify(data?.user));
				// const tokenHeader = jqXHR.getResponseHeader('Set-Cookie') || jqXHR.getResponseHeader('Your-Custom-Header');

				// console.log(tokenHeader);
				const isLoggedIn = checkIfTokenExist();
				if(!isLoggedIn) {
					document.cookie = `abittoken=${data.user.token}; expires=${getFormattedExpirationDate()}; path=/`;
					isUserLoggedIn = true;
				}

				$("#registerLoginBtn").closest("li").hide();
			
				if(!isLogin && userType.toLowerCase() !== "creator") {
					$("#loginModal, #registerModal").modal("hide");
					//aBit_UTIL.displaySuccessDialog('Success!', "Thank you! Our team will reach out soon.");
				} else if(isLogin && userType.toLowerCase() !== "creator") {
					let loggedInUserInfo = parseJwt(response.credential);
					console.log(loggedInUserInfo);
				} else if(!isLogin && userType.toLowerCase() === "creator") {
					$("#loginModal, #registerModal").modal("hide");
					$("#creatorSignupModal").modal("show");
					$("#creatorSignupModal .creator-signup-step-1").hide();
					$("#creatorSignupModal .creator-signup-step-2").show();
				} else {
					window.location.href = `creatordashboard.html?id=${id}`;
				}

				let loggedInUserInfo = parseJwt(response.credential);
				showProfileViewAfterSuccessfullLogin({...loggedInUserInfo, ...data.user});	
			},
			error: function (XMLHttpRequest, textStatus, errorThrown) {
				aBit_UTIL.displayErrorDialog('ERROR!', "SOME ERORR");
			}
		});
	}

function checkIfTokenExist() {
	let isTokenExist = true;
	if(document.cookie.indexOf('abittoken=') === -1) {
		isTokenExist = false;
	}
	return isTokenExist;
}

function getFormattedExpirationDate() {
	// Get the current date
	let currentDate = new Date();

	// Calculate the expiration date by adding one day
	let expirationDate = new Date(currentDate);
	expirationDate.setDate(currentDate.getDate() + 2);

	// Format the expiration date in the correct format for the cookie
	const formattedExpirationDate = expirationDate.toUTCString();
	return formattedExpirationDate;
}
	
let logOutUser = (elem) => {
	const userInfo = JSON.parse(localStorage.getItem("userInfo"));

	$.ajax({
		url: `${BASE_URL}/v1/creator/logout`, 
		type: 'POST',
		data: {
			'email': `${userInfo.email}`
		},
		xhrFields: {
			withCredentials: true
		},
		crossDomain: true,
		success: function (data) {
			google.accounts.id.initialize({
				client_id: "280264346590-vjg6cqponliotfqn32pt2mna2jnqmmtu.apps.googleusercontent.com",
			});
			google.accounts.id.revoke(`${userInfo.email}`, done => {
				console.log('consent revoked');
				document.cookie = "abittoken=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
				localStorage.removeItem("userInfo");
				$("#userProfileTempl").remove();
				$("#registerLoginBtn").closest("li").show();
				location.reload();

				//window.location.href = "index.html";
			});
			
			aBit_UTIL.displaySuccessDialog('Success!', "Thank you! Our team will reach out soon.");
		},
		error: function (XMLHttpRequest, textStatus, errorThrown) {
			aBit_UTIL.displayErrorDialog('ERROR!', "SOME ERORR");
		}
	});	
}

  const initCalendly = () => {
	const userInfo = JSON.parse(localStorage.getItem("userInfo"));
	console.log(userInfo);
	Calendly.initPopupWidget({
		url: "https://calendly.com/abit-tech/calendly-testing",	
	});

	$(".calendly-popup-close, .calendly-close-overlay").off("click").on("click", function() {
		$(".creator-signup-step-2").hide();

		window.location.href = `creatordashboard.html?id=${userInfo.id}`;
		//.closePopupWidget();
	})
	//Calendly.closePopupWidget();
	
	return false;
}

const showProfileViewAfterSuccessfullLogin = (loggedInUserInfo) => {
	debugger;
	let {picture, name, profilePic, userType} = loggedInUserInfo;
	const userProfileTempLength = $("#userProfileTempl").length;
	if(userProfileTempLength === 0) {
		let userProfileTempl = `<li class="nav-item dropdown pt-1 user-profile" id="userProfileTempl">
									<a href="${(userType.toLowerCase() === "fan" ? "audiencedashboard.html" : "creatordashboard.html")}">
										<img class="profile-img" src="${picture || "svg/icons/profile-pic.svg"}" alt="audience-profile-img" style="width: 32px; height: 32px; border-radius: 24px;">
									</a>
									<a class="nav-link dropdown-toggle border-0 d-inline" href="#" role="button" data-toggle="dropdown" aria-expanded="false" style="margin-top: -6px;">
									
									</a>
									<div class="dropdown-menu" style="border-radius: 24px; width: 170px; height: 145px; padding: 20px 2px;">
									<a class="dropdown-item" href="editcreatorprofile.html">Edit Profile</a>
									<a class="dropdown-item" href="#">Account</a>
									<a class="dropdown-item" href="#" onclick="logOutUser();">Logout</a>
									</div>
								</li>`;

		$("#homePageNavbar ul").append(userProfileTempl);
	}

	$(".signup-btn").removeClass("d-inline-flex").hide();

}

const getUserProfileInfo = () => {
    const userInfo = JSON.parse(localStorage.getItem("userInfo"));
	const url = getProfileApiUrlBasedOnUserType(userInfo);

	//https://api-abit.onrender.com/v1/fan/profile
    $.ajax({
        url: url, 
        type: 'GET',
        xhrFields: {
               withCredentials: true
            },
        crossDomain: true,
        success: function (data) {
			$("#registerLoginBtn").closest("li").hide();

			showProfileViewAfterSuccessfullLogin({...data.user, ...userInfo});

            //showProfileViewAfterSuccessfullLogin(data.user);
            aBit_UTIL.displaySuccessDialog('Success!', "Thank you! Our team will reach out soon.");
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
            aBit_UTIL.displayErrorDialog('ERROR!', "SOME ERORR");
        }
    });	
}
const getProfileApiUrlBasedOnUserType = ({id, userType}) => {
	
	const url = userType.toLowerCase() === "fan" 
					? `${BASE_URL}/v1/fan/profile` 
						: `${BASE_URL}/v1/${userType.toLowerCase()}/${id}`;

	return url;
}
		
  </script>
</html>